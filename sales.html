<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª | Ø±ÙˆØ§Ù‚</title>

<style>
body{
  font-family: Tahoma;
  background:#f5f5f5;
}
.box{
  max-width:420px;
  margin:40px auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
  text-align:center;
}
h2{
  color:#5a1f5f;
  margin-bottom:20px;
}
.card{
  background:#5a1f5f;
  color:#fff;
  padding:14px;
  margin:10px 0;
  border-radius:8px;
  font-size:16px;
}
a{
  display:block;
  margin-top:15px;
  text-decoration:none;
  color:#5a1f5f;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="box">
  <h2>ðŸ“Š Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h2>

  <div class="card" id="day">Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…: 0</div>
  <div class="card" id="week">Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹: 0</div>
  <div class="card" id="month">Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±: 0</div>
  <div class="card" id="year">Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø³Ù†Ø©: 0</div>

  <a href="index.html">â¬… Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
</div>

<script>
let orders = JSON.parse(localStorage.getItem("orders")) || [];

let today = new Date();
let dayTotal = 0, weekTotal = 0, monthTotal = 0, yearTotal = 0;

orders.forEach(o => {
  if (o.status !== "ØªÙ…") return; // ðŸ”´ ÙÙ‚Ø· Ø§Ù„Ù…Ù†Ø¬Ø²Ø©

  let d = new Date(o.eventDate);
  let net = Number(o.net || 0);

  // Ø§Ù„ÙŠÙˆÙ…
  if (d.toDateString() === today.toDateString()) {
    dayTotal += net;
  }

  // Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ (7 Ø£ÙŠØ§Ù…)
  let diffDays = (today - d) / (1000 * 60 * 60 * 24);
  if (diffDays >= 0 && diffDays <= 7) {
    weekTotal += net;
  }

  // Ø§Ù„Ø´Ù‡Ø±
  if (d.getMonth() === today.getMonth() &&
      d.getFullYear() === today.getFullYear()) {
    monthTotal += net;
  }

  // Ø§Ù„Ø³Ù†Ø©
  if (d.getFullYear() === today.getFullYear()) {
    yearTotal += net;
  }
});

document.getElementById("day").innerText   = "Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…: "   + dayTotal;
document.getElementById("week").innerText  = "Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹: " + weekTotal;
document.getElementById("month").innerText = "Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±: "   + monthTotal;
document.getElementById("year").innerText  = "Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø³Ù†Ø©: "   + yearTotal;
</script>

</body>
</html>
