<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>رواق | إدارة الحجوزات</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f5f5;
  padding: 15px;
}

h1 {
  text-align: center;
}

form, table {
  background: #fff;
  padding: 15px;
  border-radius: 6px;
  margin-bottom: 20px;
}

label {
  font-weight: bold;
  display: block;
  margin-top: 10px;
}

input, select, button {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
}

button {
  background: #6b4eff;
  color: white;
  border: none;
  cursor: pointer;
  margin-top: 15px;
}

button:hover {
  opacity: 0.9;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}

.red { background: #ffd6d6; }
.yellow { background: #fff3cd; }
.green { background: #d4edda; }

.remove-btn {
  color: red;
  cursor: pointer;
  font-size: 12px;
}
</style>
</head>

<body>

<h1>إدارة الحجوزات – رواق</h1>

<form id="bookingForm">

<label>اسم العميل</label>
<input type="text" id="clientName" required>

<label>رقم الجوال</label>
<input type="text" id="phone" required>

<label>تاريخ الحجز</label>
<input type="date" id="bookingDate" required>

<label>تاريخ المناسبة</label>
<input type="date" id="eventDate" required>

<label>المشروبات</label>
<select id="drinkSelect">
  <option value="">اختر مشروب</option>
  <option>هوت شوكلت</option>
  <option>سحلب</option>
  <option>كرك</option>
  <option>كاسترد</option>
  <option>قهوة اللوز</option>
  <option>قهوة عربية</option>
  <option>شاهي أحمر</option>
  <option>تمر محشي</option>
  <option>معمول</option>
</select>

<button type="button" onclick="addDrink()">+ إضافة مشروب</button>

<ul id="drinkList"></ul>

<label>العربة</label>
<select id="cartSize">
  <option>كبيرة</option>
  <option>وسط</option>
  <option>صغيرة</option>
  <option>وسط + صغيرة</option>
</select>

<label>العربون</label>
<input type="number" id="deposit">

<label>التأمين</label>
<input type="number" id="insurance">

<label>إجمالي الفاتورة</label>
<input type="number" id="total">

<button type="submit">تأكيد الحجز</button>

</form>

<table>
<thead>
<tr>
<th>العميل</th>
<th>المناسبة</th>
<th>المشروبات</th>
<th>العربة</th>
<th>الإجمالي</th>
<th>فاتورة</th>
<th>تمت الخدمة</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<script>
let drinks = [];

function addDrink() {
  const select = document.getElementById("drinkSelect");
  if (!select.value) return;
  drinks.push(select.value);
  renderDrinks();
  select.value = "";
}

function renderDrinks() {
  const ul = document.getElementById("drinkList");
  ul.innerHTML = "";
  drinks.forEach((d, i) => {
    ul.innerHTML += <li>${d} <span class="remove-btn" onclick="removeDrink(${i})">حذف</span></li>;
  });
}

function removeDrink(i) {
  drinks.splice(i, 1);
  renderDrinks();
}

document.getElementById("bookingForm").onsubmit = function(e) {
  e.preventDefault();

  const eventDate = new Date(document.getElementById("eventDate").value);
  const today = new Date();
  const diffDays = Math.ceil((eventDate - today) / (1000 * 60 * 60 * 24));

  let color = "green";
  if (diffDays <= 2) color = "red";
  else if (diffDays <= 5) color = "yellow";

  const row = `
  <tr class="${color}">
    <td>${clientName.value}</td>
    <td>${eventDate.toLocaleDateString()}</td>
    <td>${drinks.join(", ")}</td>
    <td>${cartSize.value}</td>
    <td>${total.value}</td>
    <td><button onclick="window.print()">طباعة</button></td>
    <td><input type="checkbox"></td>
  </tr>
  `;

  document.getElementById("tableBody").innerHTML += row;

  this.reset();
  drinks = [];
  renderDrinks();
};
</script>

</body>
</html>
