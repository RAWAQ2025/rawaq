<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تسجيل طلب جديد | رواق</title>

<style>
:root{
  --purple:#4b1f5c;
  --bg:#f4f1f6;
}
body{
  margin:0;
  font-family:Tahoma, Arial;
  background:var(--bg);
}
.container{
  max-width:600px;
  margin:30px auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
}
h2{
  text-align:center;
  color:var(--purple);
}
label{
  display:block;
  margin-top:12px;
  font-weight:bold;
}
input, select{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:8px;
  border:1px solid #ccc;
}
.row{
  display:flex;
  gap:10px;
}
.row > div{ flex:1; }

button{
  margin-top:20px;
  width:100%;
  padding:12px;
  background:var(--purple);
  color:#fff;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
}

.success{
  display:none;
  margin-top:15px;
  text-align:center;
  color:green;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="container">
<h2>تسجيل طلب جديد</h2>

<label>اسم العميل</label>
<input id="name">

<label>رقم الجوال</label>
<input id="phone">

<div class="row">
  <div>
    <label>تاريخ الحجز</label>
    <input type="date" id="bookingDate">
  </div>
  <div>
    <label>تاريخ المناسبة</label>
    <input type="date" id="eventDate">
  </div>
</div>

<label>العربة</label>
<select id="cart">
  <option value="">اختر</option>
  <option>كبيرة</option>
  <option>وسط</option>
  <option>صغيرة</option>
</select>

<label>المشروبات (اكتبيها يدويًا)</label>
<input id="drinks" placeholder="مثال: هوت شوكلت، كرك">

<label>إجمالي الفاتورة</label>
<input type="number" id="total" value="0">

<label>الخصم</label>
<input type="number" id="discount" value="0">

<label>العربون</label>
<input type="number" id="deposit" value="0">

<label>التأمين</label>
<input type="number" id="insurance" value="0">

<button onclick="saveOrder()">حفظ الطلب</button>

<div class="success" id="successMsg">✅ تم حفظ الطلب</div>
</div>

<script>
const SHEET_URL = "https://script.google.com/macros/s/AKfycbwvVoy69UT6uCzHdUjLYomzYBMIFZeeEL_ipU8sqV-xd-txf7WSK-bdXjssu4hRVZ2x/exec";

function saveOrder(){

  const order = {
    name: document.getElementById("name").value,
    phone: document.getElementById("phone").value,
    bookingDate: document.getElementById("bookingDate").value,
    eventDate: document.getElementById("eventDate").value,
    cart: document.getElementById("cart").value,
    drinks: document.getElementById("drinks").value,
    total: document.getElementById("total").value,
    discount: document.getElementById("discount").value,
    deposit: document.getElementById("deposit").value,
    insurance: document.getElementById("insurance").value,
    net:
      Number(document.getElementById("total").value || 0) -
      Number(document.getElementById("discount").value || 0) -
      Number(document.getElementById("deposit").value || 0),
    status: "جديد",
    createdAt: new Date().toISOString()
  };

  /* حفظ محلي */
  const local = JSON.parse(localStorage.getItem("orders") || "[]");
  local.push(order);
  localStorage.setItem("orders", JSON.stringify(local));

  /* إرسال إلى Google Sheets */
  fetch(SHEET_URL, {
    method: "POST",
    mode: "no-cors",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(order)
  });

  document.getElementById("successMsg").style.display = "block";
}
</script>

</body>
</html>
