<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>عرض الطلبات - رواق</title>

<style>
:root{
  --purple:#4b1f5c;
  --bg:#f4f1f6;
  --red:#f8d7da;
  --yellow:#fff3cd;
  --green:#d4edda;
}
body{
  margin:0;
  font-family:Tahoma,Arial;
  background:var(--bg);
}
.container{
  max-width:95%;
  margin:20px auto;
  background:#fff;
  padding:15px;
  border-radius:12px;
}
h2{
  text-align:center;
  color:var(--purple);
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
  font-size:14px;
}
th,td{
  border:1px solid #ddd;
  padding:8px;
  text-align:center;
  vertical-align:top;
}
th{
  background:var(--purple);
  color:#fff;
}
.client{
  line-height:1.6;
}
.btn{
  border:none;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
  font-size:12px;
  margin:2px;
}
.done{
  background:#4b1f5c;
  color:#fff;
}
.delete{
  background:#dc3545;
  color:#fff;
}
.back-btn{
  margin-top:15px;
  width:100%;
  padding:12px;
  background:#ddd;
  color:#4b1f5c;
  border:none;
  border-radius:10px;
  cursor:pointer;
}
.empty{
  text-align:center;
  margin-top:20px;
  color:#777;
}
</style>
</head>

<body>

<div class="container">
<h2>عرض الطلبات</h2>

<table>
<thead>
<tr>
  <th>#</th>
  <th>اسم العميل</th>
  <th>رقم الجوال</th>
  <th>تاريخ المناسبة</th>
  <th>المشروبات</th>
  <th>العربة</th>
  <th>الصافي</th>
  <th>إجراء</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<div id="emptyMsg" class="empty" style="display:none">
  لا توجد طلبات مسجلة
</div>

<button class="back-btn" onclick="location.href='index.html'">
  العودة
</button>
</div>

<script>
// قراءة الطلبات
const orders = JSON.parse(localStorage.getItem("orders") || "[]");
const body = document.getElementById("tableBody");
const emptyMsg = document.getElementById("emptyMsg");

if(orders.length === 0){
  emptyMsg.style.display = "block";
}

// عرض الطلبات
orders.forEach((order, index) => {

  // الاسم فقط — بدون أي تعويض برقم
  const name = order.name && order.name.trim() !== "" ? order.name : "";
  const phone = order.phone || "";
  const eventDate = order.eventDate || "";
  const drinks = order.drinks || "";
  const cart = order.cart || "";
  const net = order.net || 0;

  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td>${index + 1}</td>
    <td>${name}</td>
    <td>${phone}</td>
    <td>${eventDate}</td>
    <td>${drinks}</td>
    <td>${cart}</td>
    <td>${net}</td>
    <td>
      <button class="btn done" onclick="markDone(${index})">تم</button>
      <button class="btn delete" onclick="deleteOrder(${index})">حذف</button>
    </td>
  `;
  body.appendChild(tr);
});

// تم الخدمة
function markDone(i){
  orders[i].status = "تم";
  localStorage.setItem("orders", JSON.stringify(orders));
  location.reload();
}

// حذف
function deleteOrder(i){
  if(confirm("هل أنت متأكد من حذف الطلب؟")){
    orders.splice(i,1);
    localStorage.setItem("orders", JSON.stringify(orders));
    location.reload();
  }
}
</script>

</body>
</html>
