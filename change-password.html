<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± - Ø±ÙˆØ§Ù‚</title>

<style>
body{
  font-family:Tahoma;
  background:#f5f5f5;
  margin:0;
}
.box{
  max-width:400px;
  margin:60px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
}
h2{
  text-align:center;
  color:#4b1d5a;
}
label{
  display:block;
  margin-top:12px;
  font-weight:bold;
}
input{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  width:100%;
  margin-top:15px;
  padding:12px;
  border:none;
  border-radius:8px;
  font-size:15px;
  cursor:pointer;
}
.save{
  background:#4b1d5a;
  color:#fff;
}
.back{
  background:#ddd;
  color:#4b1d5a;
}
.msg{
  margin-top:15px;
  text-align:center;
  font-weight:bold;
}
.error{color:red;}
.success{color:green;}
</style>
</head>

<body>

<script>
// ğŸ” Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø©
if(!sessionStorage.getItem("loggedIn")){
  location.href = "login.html";
}
</script>

<div class="box">
  <h2>ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</h2>

  <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
  <input type="password" id="oldPass">

  <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
  <input type="password" id="newPass">

  <label>ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
  <input type="password" id="confirmPass">

  <button class="save" onclick="changePassword()">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±</button>
  <button class="back" onclick="location.href='index.html'">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>

  <div id="msg" class="msg"></div>
</div>

<script>
function changePassword(){
  const oldPass = document.getElementById("oldPass").value;
  const newPass = document.getElementById("newPass").value;
  const confirmPass = document.getElementById("confirmPass").value;
  const msg = document.getElementById("msg");

  const savedPass = localStorage.getItem("password");

  msg.textContent = "";
  msg.className = "msg";

  if(oldPass !== savedPass){
    msg.textContent = "ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
    msg.classList.add("error");
    return;
  }

  if(!newPass || newPass.length < 4){
    msg.textContent = "ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù‚ØµÙŠØ±Ø©";
    msg.classList.add("error");
    return;
  }

  if(newPass !== confirmPass){
    msg.textContent = "ÙƒÙ„Ù…ØªØ§ Ø§Ù„Ø³Ø± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ØªÙŠÙ†";
    msg.classList.add("error");
    return;
  }

  localStorage.setItem("password", newPass);
  msg.textContent = "ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø¨Ù†Ø¬Ø§Ø­ âœ…";
  msg.classList.add("success");

  document.getElementById("oldPass").value = "";
  document.getElementById("newPass").value = "";
  document.getElementById("confirmPass").value = "";
}
</script>

</body>
</html>
